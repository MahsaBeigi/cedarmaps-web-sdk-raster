<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>CedarMaps - Simple Map Load</title>

    <script src='../dist/v1.8.0/cedarmaps.uncompressed.js'></script>
    <script src='../access-token.js'></script>
    <script src='./js/leaflet-omnivore.min.js'></script>

    <link href='../dist/v1.8.0/cedarmaps.css' rel='stylesheet' />

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id='map' class='map'> </div>
    <script>
        try {
            L.cedarmaps.accessToken = accessToken;
        } catch (err) {
            throw new Error('You need to get an access token to be able to use cedarmaps SDK. ' +
                'Send us an email to <info@cedar.ir>');
        }

        /**
         * Initilizing Map View
         */

        // Getting maps info from a tileJSON source
        var tileJSONUrl = 'https://api.cedarmaps.com/v1/tiles/cedarmaps.streets.json?access_token=' + L.cedarmaps.accessToken;

        // initilizing map into div#map
        var map = L.cedarmaps.map('map', tileJSONUrl, {
            scrollWheelZoom: true
        }).setView([35.757448286487595, 51.40876293182373], 15);

        /**
         * Initilizing Direction
         */
        var direction = L.cedarmaps.direction();

        // you should provide start/end/middle points in the following format: lat,ln;lat,lng;lat,lng 
        direction.route('cedarmaps.driving', '35.764335,51.365622;35.763316,51.365322', function(err, json) {
                var geometry = json.result.routes[0].geometry;

                var route = L.geoJSON(geometry, {
                    // for more path options see: https://leafletjs.com/reference-1.3.0.html#path-option
                    style: function(feature) {
                        return {
                            color: '#f00',
                            weight: 5
                        }
                    }
                }).addTo(map);
                map.fitBounds(route.getBounds());
        });

    </script>
</body>

</html>